<h1 style="text-align: center;">All Products</h1>

<div class="category-filter" style="text-align: center; margin-bottom: 20px;">
  <label for="category-filter">Filter by Category:</label>
  <select id="category-filter" onchange="location = this.value;">
    <option value="<%= products_path %>">All Categories</option>
    <% @categories.each do |category| %>
      <option value="<%= category_products_path(category) %>" <%= "selected" if params[:category_id].to_i == category.id %>>
        <%= category.category_name %>
      </option>
    <% end %>
  </select>
</div>

<div class="products-container">
  <% @products.each do |product| %>
    <div class="product-card">
      <% if product.image.attached? %>
        <%= image_tag url_for(product.image), size: "200x200", alt: product.product_name %>
      <% else %>
        <p>No Image Available</p>
      <% end %>
      <h3><%= product.product_name %></h3>
      <p><%= product.description %></p>
      <p><strong>Price:</strong> $<%= product.price %></p>
      <p><strong>Category:</strong> <%= product.category&.category_name %></p>
    </div>
  <% end %>
</div>

<style>
  .products-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }
  .product-card {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 15px;
    text-align: center;
    width: 250px;
    background-color: #f9f9f9;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
</style>
